{% extends "base.html" %}

{% block title %}Create account — LeaveMgmt{% endblock %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<style>
  .auth-card { max-width:520px; margin: 28px auto; border-radius:12px; box-shadow:0 12px 30px rgba(2,6,23,0.08); overflow:hidden; }
  .auth-head { background: linear-gradient(90deg,#4f46e5,#2563eb); color:white; padding:1.15rem; display:flex; gap:1rem; align-items:center; }
  .logo-box { width:44px;height:44px;border-radius:8px;background:rgba(255,255,255,0.08); display:flex;align-items:center;justify-content:center; }
  .auth-body { padding:1.35rem; background:#fff; }
  .field-label { font-weight:600; font-size:.95rem; }
  .helper { color:#6b7280; font-size:.86rem; }
  .btn-primary { background:#4f46e5; border:none; border-radius:8px; padding:.55rem 1rem; }
</style>

<div class="container">
  <div class="auth-card">
    <div class="auth-head">
      <div class="logo-box" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
          <rect width="24" height="24" rx="5" fill="white" fill-opacity="0.06"/>
          <path d="M6 9h12M6 13h12M6 17h8" stroke="white" stroke-width="1.3" stroke-linecap="round"/>
        </svg>
      </div>
      <div>
        <div class="h6 mb-0">Create your account</div>
        <small class="helper">Get started with your Leave Management account</small>
      </div>
    </div>

    <div class="auth-body">
      {% if messages %}
        {% for msg in messages %}
          <div class="alert alert-{{ msg.tags }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}

      <form method="post" id="registerForm" novalidate>
        {% csrf_token %}

        <div class="mb-3">
          <label class="field-label">Username</label>
          {{ form.username }}
          {% if form.username.errors %}
            <div class="text-danger small mt-1">{{ form.username.errors }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label class="field-label">Email</label>
          {{ form.email }}
          {% if form.email.errors %}
            <div class="text-danger small mt-1">{{ form.email.errors }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label class="field-label">Password</label>
          {{ form.password1 }}
          {% if form.password1.errors %}
            <div class="text-danger small mt-1">{{ form.password1.errors }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label class="field-label">Confirm Password</label>
          {{ form.password2 }}
          {% if form.password2.errors %}
            <div class="text-danger small mt-1">{{ form.password2.errors }}</div>
          {% endif %}
        </div>

        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary flex-grow-1" id="submitBtn">
            <i class="fa fa-user-plus me-1"></i> Create Account
          </button>
          <a href="{% url 'login' %}" class="btn btn-outline-secondary d-flex align-items-center">
            <i class="fa fa-sign-in-alt me-1"></i> Login
          </a>
        </div>

        <p class="mt-3 helper text-center">
          By creating an account, you agree to company policies.
        </p>
      </form>
    </div>
  </div>
</div>

<script>
  (function() {
    const fields = {
      'input[name="username"]': 'form-control',
      'input[name="email"]': 'form-control',
      'input[name="password1"]': 'form-control',
      'input[name="password2"]': 'form-control'
    };

    for (const selector in fields) {
      document.querySelectorAll(selector).forEach(elem => elem.classList.add(fields[selector]));
    }

    const form = document.getElementById('registerForm');
    if (form) {
      form.addEventListener('submit', () => {
        document.getElementById('submitBtn').disabled = true;
      });
    }
  })();
</script>

{% endblock %}
{% extends "base.html" %}

{% block title %}Create account — LeaveMgmt{% endblock %}

{% block content %}